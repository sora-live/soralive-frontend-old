(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],p=0,m=[];p<i.length;p++)o=i[p],s[o]&&m.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"07f9":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});n("ac6a"),n("456d"),n("55dd"),n("6b54");var a=n("1c46"),s=n.n(a);function r(e,t){return s.a.createHmac("sha1",t).update(e).digest().toString("base64")}function o(e,t){var n=JSON.stringify(t);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:n})}function i(e,t){t["ts"]=Date.now();var n=Object.keys(t).sort().reduce(function(e,n){return e+(n+t[n])},""),a=localStorage.getItem("sk"),s=r(n,a);t["sign"]=s;var o=JSON.stringify(t);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:o})}},1:function(e,t){},2:function(e,t){},"296e":function(e,t,n){"use strict";var a={promotion:{home:"<h1>Share your キラキラドキドキ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h1><h1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with the world.</h1>"},info:{soralive:"SoraLive",home:"Home Page",allLive:"All Streaming",broadcasting:"Live broadcast",live:"Live",language:"Language",joinnow:"Join Now",reg:"Sign Up",login:"Sign In",email:"E-mail",password:"Password",uname:"Username",repass:"Repeat password",roomname:"Room Name",null:"Meow~",info:"Notice",success:"Succeed",userCenter:"User Center",myLiveRoom:"My Live Room",logout:"Sign Out",unknownError:"Unknown Error",basicInfo:"Basic Infomation",loading:"Loading...",databaseError:"Database Error",liveroomInfo:"Live room infomation",status:"Current status",close:"close",open:"open",description:"Introduction",updateRN:"Modify the room name and introduction",streamParam:"broadcast parameters",streamServer:"Stream Server",streamKey:"Stream Key",resetStreamKey:"Reset stream key",imcomming:"I'm Comming!",privatelevel:"Public Level",anyone:"Anyone",needloged:"Only Logged",needpassword:"Need to enter password",privatepassword:"Private stream password",updatePassword:"Modify stream password"},tips:{repassDifferent:"The duplicate password is different.",registerSuccess:"Registration is successful, please wait for the administrator to review before opening the room. After the audit is passed, the administrator will manually send a notification email to your mailbox. Please pay attention to the mail from @minyami.net.",usernameNotEmpty:"Username can not be empty.",passwordNotEmpty:"Password can not be empty.",emailNotEmpty:"E-mail can not be empty.",roomnameNotEmpty:"Room name can not be empty.",usernameUsed:"The username is already in use by another user.",emailUsed:"The E-mail address has been used by other users.",tokenNotEmpty:"Token parameter is required",invalidToken:"Token is invalid",passNotMatched:"Username and password do not match",loginencryptfailed:"Encryption failed during login",alreadyLogin:"You are already logged in",unloginSucceed:"Successful logout",loginSucceed:"Successful login",needApprove:"<p>Your account is currently not approved.</p><p>You can browse the content of this site without restriction, but you can't push stream to this site.</p><p>To open a live room and push stream, please wait for the administrator to review it.</p>",updateRnSucceed:"The name and description of the room were successfully modified.",clickButtonBelowToResetStreamKey:"Click the button below to reset the stream key",resetStreamKeyTips1:"When the live video does not correspond to the stream, or the live program delays for a long time, you can try to reset the stream code to avoid the cache problem.",resetStreamKeyTips2:"Streaming on a public machine or other security reasons can also invalidate previous stream settings by resetting the stream key.",homeDescription:"SoraLive is a streaming service website. You can stream and live via OBS using standard RTMP.",setStatusNotEmpty:"The set room properties cannot be empty.",setStatusError:"The set room property is invalid.",liveRoomEmpty:"No one is sharing their own キラキラドキドキ",uidInvalid:"The requested room number is invalid.",userInvalid:"The requested user does not exist or does not open the live room.",signNotEmpty:"Request signature cannot be empty.",signFailed:"Invalid request signature.",timestampNotEmpty:"API request requires additional timestamp.",wrongPassword:"Wrong password",needLogin:"The live room needs to be logged in before entering."},action:{toggleNavbar:"Toggle navigation bar",close:"close",copy:"copy"},lang:{"zh-CN":"Chinese (Simplified)","en-US":"English"}};t["a"]=a},"2f6e":function(e,t,n){"use strict";var a={promotion:{home:"<h1>与全世界分享你的&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h1><h1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;キラキラドキドキ</h1>"},info:{soralive:"SoraLive",home:"首页",allLive:"所有直播",broadcasting:"正在直播",live:"直播",language:"语言",joinnow:"立即加入",reg:"注册",login:"登录",email:"E-mail",password:"密码",uname:"用户名",repass:"重复密码",roomname:"房间名",null:"喵~",info:"信息提示",success:"成功",userCenter:"用户中心",myLiveRoom:"我的直播间",logout:"注销",unknownError:"未知错误",basicInfo:"基本信息",loading:"正在加载...",databaseError:"数据库错误",liveroomInfo:"直播间信息",status:"当前状态",close:"关闭",open:"打开",description:"简介",updateRN:"修改房间名及简介",streamParam:"直播参数",streamServer:"直播地址",streamKey:"串流码",resetStreamKey:"重置串流码",imcomming:"我来！",privatelevel:"直播公开等级",anyone:"任何人",needloged:"仅登录用户",needpassword:"需要输入密码",privatepassword:"密码",updatePassword:"更新密码"},tips:{repassDifferent:"两次密码不一致。",registerSuccess:"注册成功，请等待管理员审核后才可开设房间，审核通过后会由管理员手工向你邮箱发送通知邮件。请留意来自@minyami.net的邮件。",usernameNotEmpty:"用户名不能为空。",passwordNotEmpty:"密码不能为空。",emailNotEmpty:"邮箱不能为空。",roomnameNotEmpty:"房间名不能为空",usernameUsed:"用户名已被其他用户使用。",emailUsed:"邮箱已被其他用户使用。",tokenNotEmpty:"Token是必须参数",invalidToken:"Token无效",passNotMatched:"用户名和密码不匹配",loginencryptfailed:"在登录过程中加密失败",alreadyLogin:"您已经是登录状态",unloginSucceed:"成功注销",loginSucceed:"成功登录",needApprove:"<p>您的账号目前是未通过审核状态。</p><p>您可以不受限制的浏览本站内容，但是你不能向本站推流。</p><p>要开设直播间并推流，请等待管理员审核后进行。</p>",updateRnSucceed:"房间名及简介修改成功",clickButtonBelowToResetStreamKey:"点击下面按钮重置串流码",resetStreamKeyTips1:"当直播视频与串流不对应，或直播节目播放过去很久内容的时候可以尝试重置串流码来避免缓存问题。",resetStreamKeyTips2:"在公共机器上串流或其他安全性原因也可通过重置串流码使之前的串流设置失效。",homeDescription:"SoraLive是一个串流服务网站。你可以使用标准的RTMP通过OBS进行串流与直播。",setStatusNotEmpty:"设置的房间属性不能为空。",setStatusError:"设置的房间属性无效。",liveRoomEmpty:"没有人正在分享自己的キラキラドキドキ",uidInvalid:"请求的房间号无效。",userInvalid:"请求的用户不存在或未开通直播间。",signNotEmpty:"请求签名不能为空",signFailed:"请求签名无效",timestampNotEmpty:"API请求需要附加时间戳",wrongPassword:"密码错误",needLogin:"该直播间需要登录后才可进入"},action:{toggleNavbar:"切换导航栏",close:"关闭",copy:"复制"},lang:{"zh-CN":"简体中文","en-US":"英语"}};t["a"]=a},3:function(e,t){},"3dfd":function(e,t,n){"use strict";var a,s,r,o,i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Modal"),n("nav",{staticClass:"navbar navbar-inverse navbar-fixed-top"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"navbar-header"},[n("button",{staticClass:"navbar-toggle collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#bs-navbar-collapse","aria-expanded":"false"}},[n("span",{staticClass:"sr-only"},[e._v(e._s(e.$t("action.toggleNavbar")))]),n("span",{staticClass:"icon-bar"}),n("span",{staticClass:"icon-bar"}),n("span",{staticClass:"icon-bar"})]),n("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[e._v(e._s(e.$t("info.soralive")))])],1),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"bs-navbar-collapse"}},[n("ul",{staticClass:"nav navbar-nav"},[n("li",[n("router-link",{attrs:{to:"/"}},[e._v(e._s(e.$t("info.home")))])],1),n("li",[n("router-link",{attrs:{to:"/list"}},[e._v(e._s(e.$t("info.allLive")))])],1)]),n("ul",{staticClass:"nav navbar-nav navbar-right"},[n("li",{staticClass:"dropdown"},[n("a",{staticClass:"dropdown-toggle",attrs:{href:"javascript:;","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"}},[e._v(e._s(e.$t("lang."+e.currentLang))+" "),n("span",{staticClass:"caret"})]),n("ul",{staticClass:"dropdown-menu"},[n("li",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.chlang("zh-CN")}}},[e._v(e._s(e.$t("lang.zh-CN")))])]),n("li",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.chlang("en-US")}}},[e._v(e._s(e.$t("lang.en-US")))])])])]),e.isLogin?[n("li",[n("router-link",{attrs:{to:"/reg"}},[e._v(e._s(e.$t("info.reg")))])],1),n("li",[n("router-link",{attrs:{to:"/login"}},[e._v(e._s(e.$t("info.login")))])],1)]:[n("li",{staticClass:"dropdown"},[n("a",{staticClass:"dropdown-toggle",attrs:{href:"javascript:;","data-toggle":"dropdown",role:"button","aira-haspopup":"true","aria-expanded":"false"}},[e._v(e._s(e.uname)+" "),n("span",{staticClass:"caret"})]),n("ul",{staticClass:"dropdown-menu"},[n("li",[n("router-link",{attrs:{to:"/user"}},[e._v(e._s(e.$t("info.userCenter")))])],1),n("li",[n("a",{attrs:{href:"javascript:;"}},[e._v(e._s(e.$t("info.myLiveRoom")))])]),n("li",{staticClass:"divider",attrs:{role:"separator"}}),n("li",[n("a",{attrs:{href:"javascript:;"},on:{click:e.logout}},[e._v(e._s(e.$t("info.logout")))])])])])]],2)])])]),n("div",{staticClass:"container-fluid main-content"},[n("router-view")],1),e._m(0)],1)},c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer"},[n("div",{staticClass:"container-fluid footer-content"},[n("div",[e._v("©SoraLive 2018-2019.")]),n("div",[e._v("Special Thanks to MeowSound Idols and other supporters.")])])])}],l=(n("96cf"),n("3b8d")),u=n("d225"),p=n("b0b4"),m=n("308d"),d=n("6bb5"),v=n("4e2b"),f=n("2b0e"),b=n("65d9"),h=n.n(b),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal fade",attrs:{id:"myModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[e._m(0),n("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t(e.title)))])]),n("div",{staticClass:"modal-body"},[e._v("\n                "+e._s(e.$t(e.msg))+"\n            ")]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[e._v(e._s(e.$t("action.close")))])])])])])},y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],w=n("013f"),_=n("bd86"),j=n("1157"),O=n.n(j),k=h()((s=function(e){function t(){var e,n;Object(u["a"])(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=Object(m["a"])(this,(e=Object(d["a"])(t)).call.apply(e,[this].concat(s))),Object(_["a"])(Object(w["a"])(n),"title","info.info"),Object(_["a"])(Object(w["a"])(n),"msg","info.null"),n}return Object(v["a"])(t,e),Object(p["a"])(t,[{key:"created",value:function(){var e=this;this.$gConst.globalbus.$on("send-info",function(t){e.msg=t,e.showModal()})}},{key:"showModal",value:function(){O()("#myModal").modal()}}]),t}(f["default"]),a=s))||a,C=k,x=C,$=(n("b338"),n("2877")),S=Object($["a"])(x,g,y,!1,null,null,null),R=S.exports,P=n("07f9"),I=(r=h()({components:{Modal:R}}),r(o=function(e){function t(){return Object(u["a"])(this,t),Object(m["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(p["a"])(t,[{key:"created",value:function(){console.log("SoraLive 0.1.0 created by MoewSound Idols."),this.$i18n.locale=localStorage.getItem("lang")||"zh-CN"}},{key:"chlang",value:function(e){this.$i18n.locale=e,localStorage.setItem("lang",e)}},{key:"logout",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"user/logout",e.next=3,Object(P["b"])(t,{token:localStorage.getItem("token")||""});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,0!=a["error"]?this.$gConst.globalbus.$emit("send-info",a["info"]):this.$gConst.globalbus.$emit("send-info","tips.unloginSucceed"),this.$router.push("/login"),localStorage.removeItem("token"),localStorage.removeItem("uname"),localStorage.removeItem("sk"),localStorage.removeItem("uid"),localStorage.removeItem("user-type"),location.reload();case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"currentLang",get:function(){return this.$i18n.locale}},{key:"isLogin",get:function(){return null==localStorage.getItem("token")}},{key:"uname",get:function(){return localStorage.getItem("uname")||"[][NULL]"}}]),t}(f["default"]))||o),E=I,L=E,N=(n("5c0b"),Object($["a"])(L,i,c,!1,null,null,null));t["a"]=N.exports},4:function(e,t){},"41cb":function(e,t,n){"use strict";var a,s,r,o,i,c,l,u,p,m=n("2b0e"),d=n("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"jumbotron"},[n("div",{staticClass:"jumbotron-centerhead",domProps:{innerHTML:e._s(e.$t("promotion.home"))}}),n("p",[e._v(" ")]),n("p",[e._v(e._s(e.$t("tips.homeDescription")))]),n("p",[n("router-link",{staticClass:"btn btn-primary btn-lg",attrs:{to:"/reg",role:"button"}},[e._v(e._s(e.$t("info.joinnow")))])],1)])},f=[],b=n("d225"),h=n("308d"),g=n("6bb5"),y=n("4e2b"),w=n("65d9"),_=n.n(w),j=_()(a=function(e){function t(){return Object(b["a"])(this,t),Object(h["a"])(this,Object(g["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),t}(m["default"]))||a,O=j,k=O,C=(n("eb86"),n("2877")),x=Object(C["a"])(k,v,f,!1,null,"57fab41c",null),$=x.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("h1",[e._v(e._s(e.$t("info.broadcasting")))]),0!=e.roomlist.length?n("div",{staticClass:"room-list"},e._l(e.roomlist,function(t){return n("div",{key:t.uid,staticClass:"room-item",on:{click:function(n){return e.openRoom(t.uid)}}},[n("div",{staticClass:"room-name"},[e._v(e._s(t.roomname))]),n("div",{staticClass:"room-user"},[e._v("@"+e._s(t.uname))])])}),0):n("div",{staticClass:"room-empty"},[n("p",[e._v(e._s(e.$t("tips.liveRoomEmpty")))]),n("p",[n("router-link",{staticClass:"btn btn-primary btn-lg",attrs:{to:"/user",role:"button"}},[e._v(e._s(e.$t("info.imcomming")))])],1)])])},R=[],P=(n("96cf"),n("3b8d")),I=n("b0b4"),E=n("013f"),L=n("bd86"),N=n("07f9"),T=_()((r=function(e){function t(){var e,n;Object(b["a"])(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=Object(h["a"])(this,(e=Object(g["a"])(t)).call.apply(e,[this].concat(s))),Object(L["a"])(Object(E["a"])(n),"roomlist",[]),n}return Object(y["a"])(t,e),Object(I["a"])(t,[{key:"mounted",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"index/getlist",e.next=3,Object(N["a"])(t,{});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,this.roomlist=a;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"openRoom",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/live/"+t);case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(m["default"]),s=r))||s,F=T,A=F,M=(n("5f8f"),Object(C["a"])(A,S,R,!1,null,"3c4140ac",null)),K=M.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-area"},[e.isAlert?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[n("span",[e._v(e._s(e.$t(e.alertInfo)))])]):e._e(),n("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.dologin(t)}}},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputUname"}},[e._v(e._s(e.$t("info.uname")))]),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.uname,expression:"uname"}],staticClass:"form-control",attrs:{type:"text",id:"inputUname",placeholder:e.$t("info.uname")},domProps:{value:e.uname},on:{input:function(t){t.target.composing||(e.uname=t.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputPassword"}},[e._v(e._s(e.$t("info.password")))]),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:e.$t("info.password")},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"col-sm-offset-2 col-sm-10"},[n("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[e._v(e._s(e.$t("info.login")))])])])])])},q=[],B=n("720d"),D=_()((i=function(e){function t(){var e,n;Object(b["a"])(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=Object(h["a"])(this,(e=Object(g["a"])(t)).call.apply(e,[this].concat(s))),Object(L["a"])(Object(E["a"])(n),"isAlert",!1),Object(L["a"])(Object(E["a"])(n),"alertInfo","info.null"),Object(L["a"])(Object(E["a"])(n),"uname",""),Object(L["a"])(Object(E["a"])(n),"password",""),n}return Object(y["a"])(t,e),Object(I["a"])(t,[{key:"created",value:function(){null!=localStorage.getItem("token")&&(this.$gConst.globalbus.$emit("send-info","tips.alreadyLogin"),this.$router.push("/"))}},{key:"dologin",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a,s,r,o,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(N["a"])(this.$gConst.apiRoot+"user/prelogin",{});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,a=n["key"],s=n["token"],r=new B["JSEncrypt"],r.setPublicKey(a),o=r.encrypt(this.password),o){e.next=15;break}return this.isAlert=!0,this.alertInfo="tips.loginencryptfailed",e.abrupt("return");case 15:return e.next=17,Object(N["a"])(this.$gConst.apiRoot+"user/login",{token:s,uname:this.uname,pass:o});case 17:return i=e.sent,e.next=20,i.json();case 20:if(c=e.sent,0==c["error"]){e.next=25;break}return this.isAlert=!0,this.alertInfo=c["info"],e.abrupt("return");case 25:localStorage.setItem("token",c["token"]),localStorage.setItem("sk",c["user"]["sk"]),localStorage.setItem("uname",c["user"]["uname"]),localStorage.setItem("uid",c["user"]["uid"]),localStorage.setItem("user-type",c["user"]["type"]),this.$gConst.globalbus.$emit("send-info","tips.loginSucceed"),this.$router.push("/"),location.reload();case 33:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(m["default"]),o=i))||o,z=D,H=z,J=(n("5571"),Object(C["a"])(H,U,q,!1,null,null,null)),W=J.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-area"},[e.isAlert?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[n("span",[e._v(e._s(e.$t(e.alertInfo)))])]):e._e(),n("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.doreg(t)}}},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputUname"}},[e._v(e._s(e.$t("info.uname")))]),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.uname,expression:"uname"}],staticClass:"form-control",attrs:{type:"text",id:"inputUname",placeholder:e.$t("info.uname")},domProps:{value:e.uname},on:{input:function(t){t.target.composing||(e.uname=t.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputEmail"}},[e._v(e._s(e.$t("info.email")))]),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:e.$t("info.email")},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputPassword"}},[e._v(e._s(e.$t("info.password")))]),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:e.$t("info.password")},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputPassword2"}},[e._v(e._s(e.$t("info.repass")))]),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.repass,expression:"repass"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword2",placeholder:e.$t("info.repass")},domProps:{value:e.repass},on:{input:function(t){t.target.composing||(e.repass=t.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputRoomname"}},[e._v(e._s(e.$t("info.roomname")))]),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.roomname,expression:"roomname"}],staticClass:"form-control",attrs:{type:"text",id:"inputRoomname",placeholder:e.$t("info.roomname")},domProps:{value:e.roomname},on:{input:function(t){t.target.composing||(e.roomname=t.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"col-sm-offset-2 col-sm-10"},[n("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[e._v(e._s(e.$t("info.reg")))])])])])])},Q=[],G=_()((l=function(e){function t(){var e,n;Object(b["a"])(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=Object(h["a"])(this,(e=Object(g["a"])(t)).call.apply(e,[this].concat(s))),Object(L["a"])(Object(E["a"])(n),"uname",""),Object(L["a"])(Object(E["a"])(n),"email",""),Object(L["a"])(Object(E["a"])(n),"password",""),Object(L["a"])(Object(E["a"])(n),"repass",""),Object(L["a"])(Object(E["a"])(n),"roomname",""),Object(L["a"])(Object(E["a"])(n),"isAlert",!1),Object(L["a"])(Object(E["a"])(n),"alertInfo","info.null"),n}return Object(y["a"])(t,e),Object(I["a"])(t,[{key:"created",value:function(){null!=localStorage.getItem("token")&&(this.$gConst.globalbus.$emit("send-info","tips.alreadyLogin"),this.$router.push("/"))}},{key:"doreg",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.password==this.repass){e.next=5;break}this.alertInfo="tips.repassDifferent",this.isAlert=!0,e.next=13;break;case 5:return t=this.$gConst.apiRoot+"user/reg",e.next=8,Object(N["a"])(t,{uname:this.uname,email:this.email,pass:this.password,roomname:this.roomname});case 8:return n=e.sent,e.next=11,n.json();case 11:a=e.sent,1==a["error"]?(this.isAlert=!0,this.alertInfo=a["info"]):(this.$gConst.globalbus.$emit("send-info","tips.registerSuccess"),this.$router.push("/login"));case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(m["default"]),c=l))||c,V=G,X=V,Z=(n("645a"),Object(C["a"])(X,Y,Q,!1,null,null,null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"col-sm-8"},[e.isOpen?n("section",[n("div",[n("h3",[e._v(e._s(e.$t("info.liveroomInfo")))]),n("p",[e._v("\n                    "+e._s(e.$t("info.status"))+":\n                    "),n("button",{staticClass:"btn",class:{"btn-default":e.streaming,"btn-success":!e.streaming},on:{click:e.setStreamClose}},[e._v(e._s(e.$t("info.close")))]),n("button",{staticClass:"btn",class:{"btn-default":!e.streaming,"btn-success":e.streaming},on:{click:e.setStreamOpen}},[e._v(e._s(e.$t("info.open")))])]),n("p",[e._v("\n                    "+e._s(e.$t("info.roomname"))+":\n                    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.roomname,expression:"roomname"}],staticClass:"textbox",attrs:{type:"text",size:"70"},domProps:{value:e.roomname},on:{input:function(t){t.target.composing||(e.roomname=t.target.value)}}})]),n("p",[e._v("\n                    "+e._s(e.$t("info.description"))+":\n                    "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"textarea",attrs:{cols:"70",rows:"6"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),n("p",[n("button",{staticClass:"btn btn-primary",on:{click:e.updateRN}},[e._v(e._s(e.$t("info.updateRN")))])]),n("p",[e._v("\n                    "+e._s(e.$t("info.privatelevel"))+":\n                    "),n("button",{staticClass:"btn",class:{"btn-default":0!=e.privateLevel,"btn-success":0==e.privateLevel},on:{click:function(t){return e.setPrivate(0)}}},[e._v(e._s(e.$t("info.anyone")))]),n("button",{staticClass:"btn",class:{"btn-default":1!=e.privateLevel,"btn-success":1==e.privateLevel},on:{click:function(t){return e.setPrivate(1)}}},[e._v(e._s(e.$t("info.needloged")))]),n("button",{staticClass:"btn",class:{"btn-default":2!=e.privateLevel,"btn-success":2==e.privateLevel},on:{click:function(t){return e.setPrivate(2)}}},[e._v(e._s(e.$t("info.needpassword")))])]),n("p",[e._v("\n                    "+e._s(e.$t("info.privatepassword"))+":\n                    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.privatePassword,expression:"privatePassword"}],staticClass:"textbox",attrs:{type:"text",size:"50"},domProps:{value:e.privatePassword},on:{input:function(t){t.target.composing||(e.privatePassword=t.target.value)}}}),n("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.setPrivate(void 0)}}},[e._v(e._s(e.$t("info.updatePassword")))])])]),n("div",[n("h3",[e._v(e._s(e.$t("info.streamParam")))]),n("p",[e._v(e._s(e.$t("info.streamServer"))+": "+e._s(e.streaming_address)+" "),n("button",{staticClass:"btn btn-info btn-sm",on:{click:e.copyStreamingURL}},[e._v(e._s(e.$t("action.copy")))])]),n("p",[e._v(e._s(e.$t("info.streamKey"))+": "+e._s(e.streamkey||e.$t("tips.clickButtonBelowToResetStreamKey"))+" "),n("button",{staticClass:"btn btn-info btn-sm",on:{click:e.copyStreamKey}},[e._v(e._s(e.$t("action.copy")))])]),n("p",[n("button",{staticClass:"btn btn-info",on:{click:e.resetSK}},[e._v(e._s(e.$t("info.resetStreamKey")))]),n("br"),n("span",{staticStyle:{color:"#666"}},[e._v(e._s(e.$t("tips.resetStreamKeyTips1")))]),n("br"),n("span",{staticStyle:{color:"#666"}},[e._v(e._s(e.$t("tips.resetStreamKeyTips2")))])])])]):n("section",[n("div",{domProps:{innerHTML:e._s(e.$t(e.loadingInfo))}})])]),n("div",{staticClass:"col-sm-4"},[n("h3",[e._v(e._s(e.$t("info.basicInfo")))]),n("p",[e._v("UID: "+e._s(e.uid))]),n("p",[e._v(e._s(e.$t("info.email"))+": "+e._s(e.email))]),n("p",[e._v(e._s(e.$t("info.uname"))+": "+e._s(e.uname))])])])},ne=[];function ae(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();var n=!1;try{n=document.execCommand("copy");var a=n?"successful":"unsuccessful";console.log("Copying text command was "+a)}catch(s){console.log("Oops, unable to copy"),n=!1}return document.body.removeChild(t),n}var se,re,oe,ie,ce,le,ue=_()((p=function(e){function t(){var e,n;Object(b["a"])(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=Object(h["a"])(this,(e=Object(g["a"])(t)).call.apply(e,[this].concat(s))),Object(L["a"])(Object(E["a"])(n),"cover",""),Object(L["a"])(Object(E["a"])(n),"description",""),Object(L["a"])(Object(E["a"])(n),"email",""),Object(L["a"])(Object(E["a"])(n),"roomname",""),Object(L["a"])(Object(E["a"])(n),"streaming",!1),Object(L["a"])(Object(E["a"])(n),"streamkey",""),Object(L["a"])(Object(E["a"])(n),"type",0),Object(L["a"])(Object(E["a"])(n),"uid",0),Object(L["a"])(Object(E["a"])(n),"uname",""),Object(L["a"])(Object(E["a"])(n),"loadingInfo","info.loading"),Object(L["a"])(Object(E["a"])(n),"streaming_address",""),Object(L["a"])(Object(E["a"])(n),"privateLevel",0),Object(L["a"])(Object(E["a"])(n),"privatePassword",""),n}return Object(y["a"])(t,e),Object(I["a"])(t,[{key:"created",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"user/detail",e.next=3,Object(N["b"])(t,{token:localStorage.getItem("token")||""});case 3:return n=e.sent,e.next=6,n.json();case 6:if(a=e.sent,0==a["error"]){e.next=12;break}return this.$gConst.globalbus.$emit("send-info",a["info"]),e.abrupt("return");case 12:localStorage.setItem("user-type",a["user"]["type"]),localStorage.setItem("uid",a["user"]["uid"]),localStorage.setItem("uname",a["user"]["uname"]),this.uid=a["user"]["uid"],this.uname=a["user"]["uname"],this.type=a["user"]["type"],this.streamkey=a["user"]["streamkey"],this.roomname=a["user"]["roomname"],this.email=a["user"]["email"],this.description=a["user"]["description"],this.cover=a["user"]["cover"],this.streaming="1"==a["user"]["streaming"],this.privateLevel=a["user"]["privateLevel"],this.privatePassword=a["user"]["privatePassword"],this.streaming_address=a["streaming_address"],this.loadingInfo="tips.needApprove";case 28:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setStreamOpen",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.streaming){e.next=11;break}return t=this.$gConst.apiRoot+"user/changestatus",e.next=4,Object(N["b"])(t,{token:localStorage.getItem("token")||"",status:1});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,0==a["error"]?this.streaming=!0:this.$gConst.globalbus.$emit("send-info",a["info"]),e.next=12;break;case 11:console.log("[BAKA INFO] Streaming is already OPEN.");case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setStreamClose",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.streaming){e.next=11;break}return t=this.$gConst.apiRoot+"user/changestatus",e.next=4,Object(N["b"])(t,{token:localStorage.getItem("token")||"",status:0});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,0==a["error"]?this.streaming=!1:this.$gConst.globalbus.$emit("send-info",a["info"]),e.next=12;break;case 11:console.log("[BAKA INFO] Streaming is already CLOSE.");case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updateRN",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.roomname||"",n=this.description||"",a=this.$gConst.apiRoot+"user/updatern",e.next=5,Object(N["b"])(a,{token:localStorage.getItem("token")||"",roomname:t,description:n});case 5:return s=e.sent,e.next=8,s.json();case 8:r=e.sent,0==r["error"]?this.$gConst.globalbus.$emit("send-info","tips.updateRnSucceed"):this.$gConst.globalbus.$emit("send-info",r["info"]);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"resetSK",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"user/resetkey",e.next=3,Object(N["b"])(t,{token:localStorage.getItem("token")||""});case 3:return n=e.sent,e.next=6,n.json();case 6:if(a=e.sent,0==a["error"]){e.next=12;break}return this.$gConst.globalbus.$emit("send-info",a["info"]),e.abrupt("return");case 12:location.reload();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setPrivate",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t){var n,a,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this.privateLevel,void 0!==t&&(n=t),a=this.$gConst.apiRoot+"user/updateprivatelevel",e.next=5,Object(N["b"])(a,{token:localStorage.getItem("token")||"",privateLevel:n,privatePassword:this.privatePassword});case 5:return s=e.sent,e.next=8,s.json();case 8:if(r=e.sent,0==r["error"]){e.next=14;break}return this.$gConst.globalbus.$emit("send-info",r["info"]),e.abrupt("return");case 14:void 0==t?this.$gConst.globalbus.$emit("send-info",r["info"]):this.privateLevel=t;case 15:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"copyStreamingURL",value:function(){ae(this.streaming_address)}},{key:"copyStreamKey",value:function(){ae(this.streamkey)}},{key:"isOpen",get:function(){return 1==(1&this.type)}},{key:"isAdmin",get:function(){return 1==(this.type>>4&1)}}]),t}(m["default"]),u=p))||u,pe=ue,me=pe,de=(n("9e3c"),Object(C["a"])(me,te,ne,!1,null,null,null)),ve=de.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.require_password?n("div",[n("div",{staticClass:"password-center"},[n("h1",[e._v("该房间需要输入密码")]),n("div",{staticClass:"password-enterarea"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.getPlayInfo(t)}}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"col-sm-offset-3 col-sm-5"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"text",id:"inputpass",placeholder:e.$t("info.password")},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("div",{staticClass:"col-sm-2"},[n("button",{staticClass:"btn btn-success btn-lg",attrs:{type:"submit"}},[e._v(e._s(e.$t("info.open")))])])])])])])]):n("div",[n("h1",[e._v(e._s(e.roomname))]),n("p",[e._v("@"+e._s(e.uname))]),n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"col-md-9"},[e.is_streaming?n("div",{staticClass:"player-slot"},[n("Player",{attrs:{url:e.streaming_uri}})],1):n("div",{staticClass:"player-slot",attrs:{id:"playerSlot"}},[e.is_loading?n("div",[e._v(e._s(e.$t("info.loading")))]):n("div",{staticClass:"player-area"},[e._v("未开播")])])]),n("div",{staticClass:"col-md-3"},[n("div",{staticClass:"row"},[n("h4",{staticClass:"col-md-6"},[e._v("实时评论")]),n("div",{staticClass:"col-md-6 text-right"},[n("span",{staticClass:"material-icons",attrs:{title:"在线人数"}},[e._v("remove_red_eye")]),n("span",{staticClass:"online-person"},[e._v(e._s(e.online))])])]),n("div",{staticClass:"comment-area",attrs:{id:"commentarea"}},e._l(e.commentList,function(t){return n("div",{key:t.cmtId,staticClass:"comment-line"},[n("span",{staticClass:"comment-user"},[e._v(e._s(t.uname)+"：")]),n("span",[e._v(e._s(t.content))])])}),0),n("div",{staticClass:"comment-input-area"},[n("form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.sendComment(t)}}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("label",{staticClass:"sr-only",attrs:{for:"comment-input"}},[e._v("评论输入：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input_comment,expression:"input_comment"}],staticClass:"form-control",attrs:{type:"text",id:"comment-input",disabled:!e.is_readyForChat},domProps:{value:e.input_comment},on:{input:function(t){t.target.composing||(e.input_comment=t.target.value)}}}),n("span",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-default",attrs:{type:"submit",disabled:!e.is_readyForChat}},[e._v("发送")])])])])])])])]),n("div",[n("h3",[e._v(e._s(e.$t("info.description")))]),n("div",[e._v(e._s(e.description))])])])},be=[],he=function(e){return new Promise(function(t){return setTimeout(t,e)})},ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"player-wrapper",class:{"player-wide":e.isWidescreen},attrs:{id:"player_wrapper"}},[n("div",{staticClass:"player-controls"},[n("div",{staticClass:"player-buttons"},[n("div",{staticClass:"player-buttons-left-group"},[n("span",{staticClass:"material-icons",on:{click:e.pause}},[e._v(e._s(e.playing?"pause":"play_arrow"))]),n("span",{staticClass:"material-icons",on:{click:e.mute}},[e._v(e._s(e.volumeIcon))])]),n("div",{staticClass:"player-buttons-right-group"},[n("span",{staticClass:"material-icons",on:{click:e.widescreen}},[e._v("aspect_ratio")]),e.supportPictureInPicture?n("span",{staticClass:"material-icons",on:{click:e.picinpic}},[e._v(e._s(e.isPicinPic?"picture_in_picture_alt":"picture_in_picture"))]):e._e(),n("span",{staticClass:"material-icons",on:{click:e.fullscreen}},[e._v(e._s(e.isFullscreen?"fullscreen_exit":"fullscreen"))])])])]),n("video",{attrs:{id:"player_video"}})])},ye=[],we=n("ba56"),_e=n.n(we),je=(se=_()({props:["url"]}),se((oe=function(e){function t(){var e,n;Object(b["a"])(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=Object(h["a"])(this,(e=Object(g["a"])(t)).call.apply(e,[this].concat(s))),Object(L["a"])(Object(E["a"])(n),"supportPictureInPicture",!1),Object(L["a"])(Object(E["a"])(n),"playing",!1),Object(L["a"])(Object(E["a"])(n),"isPicinPic",!1),Object(L["a"])(Object(E["a"])(n),"isFullscreen",!1),Object(L["a"])(Object(E["a"])(n),"isWidescreen",!1),Object(L["a"])(Object(E["a"])(n),"volume",1),Object(L["a"])(Object(E["a"])(n),"tempvolume",1),n}return Object(y["a"])(t,e),Object(I["a"])(t,[{key:"mounted",value:function(){var e=this,t=document.getElementById("player_video");t.addEventListener("leavepictureinpicture",Object(P["a"])(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!e.playing){n.next=3;break}return n.next=3,t.play();case 3:e.isPicinPic=!1;case 4:case"end":return n.stop()}},n)}))),t.addEventListener("enterpictureinpicture",Object(P["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.isPicinPic=!0;case 1:case"end":return t.stop()}},t)}))),t.addEventListener("playing",Object(P["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.playing=!0;case 1:case"end":return t.stop()}},t)}))),t.addEventListener("pause",Object(P["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.playing=!1;case 1:case"end":return t.stop()}},t)}))),t.addEventListener("volumechange",Object(P["a"])(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:console.log("volume change",t.volume),e.volume=t.volume;case 2:case"end":return n.stop()}},n)}))),this.supportPictureInPicture=~~document.pictureInPictureEnabled,document.addEventListener("fullscreenchange",Object(P["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:document.webkitFullscreenElement||document.fullscreenElement?e.isFullscreen=!0:e.isFullscreen=!1;case 1:case"end":return t.stop()}},t)}))),this.readyPlayer(this.url)}},{key:"readyPlayer",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t){var n,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=document.getElementById("player_video"),a=new _e.a,a.loadSource(t),a.attachMedia(n),a.on(_e.a.Events.MANIFEST_PARSED,Object(P["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.play();case 3:s.playing=!0,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log("cannot auto play");case 9:case"end":return e.stop()}},e,null,[[0,6]])})));case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"pause",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.getElementById("player_video"),!t.paused){e.next=7;break}return e.next=4,t.play();case 4:this.playing=!0,e.next=10;break;case 7:return e.next=9,t.pause();case 9:this.playing=!1;case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"picinpic",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isPicinPic){e.next=6;break}return e.next=3,document.exitPictureInPicture();case 3:this.isPicinPic=!1,e.next=10;break;case 6:return t=document.getElementById("player_video"),e.next=9,t.requestPictureInPicture();case 9:this.isPicinPic=!0;case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"fullscreen",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isFullscreen){e.next=19;break}if(!document.exitFullscreen){e.next=7;break}return e.next=4,document.exitFullscreen();case 4:this.isFullscreen=!1,e.next=17;break;case 7:if(!document.webkitExitFullscreen){e.next=13;break}return e.next=10,document.webkitExitFullscreen();case 10:this.isFullscreen=!1,e.next=17;break;case 13:if(!document.mozRequestFullScreen){e.next=17;break}return e.next=16,document.mozRequestFullScreen();case 16:this.isFullscreen=!1;case 17:e.next=36;break;case 19:if(t=document.getElementById("player_wrapper"),!t.requestFullscreen){e.next=26;break}return e.next=23,t.requestFullscreen();case 23:this.isFullscreen=!0,e.next=36;break;case 26:if(!t.webkitRequestFullScreen){e.next=32;break}return e.next=29,t.webkitRequestFullScreen();case 29:this.isFullscreen=!0,e.next=36;break;case 32:if(!t.mozRequestFullScreen){e.next=36;break}return e.next=35,t.mozRequestFullScreen();case 35:this.isFullscreen=!0;case 36:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"widescreen",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.isWidescreen=!this.isWidescreen;case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setvolume",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("setvolume",t),n=document.getElementById("player_video"),n.volume=t;case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"mute",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.volume<.001?this.setvolume(1):this.setvolume(0);case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"volumeIcon",get:function(){return this.volume<.001?"volume_off":this.volume<=.1?"volume_mute":this.volume<=.5?"volume_down":"volume_up"}}]),t}(m["default"]),re=oe))||re),Oe=je,ke=Oe,Ce=(n("cdd8"),Object(C["a"])(ke,ge,ye,!1,null,"502cfedf",null)),xe=Ce.exports,$e=(ie=_()({components:{Player:xe}}),ie((le=function(e){function t(){var e,n;Object(b["a"])(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=Object(h["a"])(this,(e=Object(g["a"])(t)).call.apply(e,[this].concat(s))),Object(L["a"])(Object(E["a"])(n),"roomname","Room Title"),Object(L["a"])(Object(E["a"])(n),"uname","username"),Object(L["a"])(Object(E["a"])(n),"description","Description"),Object(L["a"])(Object(E["a"])(n),"is_loading",!0),Object(L["a"])(Object(E["a"])(n),"is_streaming",!1),Object(L["a"])(Object(E["a"])(n),"streaming_uri",""),Object(L["a"])(Object(E["a"])(n),"require_password",!1),Object(L["a"])(Object(E["a"])(n),"password",""),Object(L["a"])(Object(E["a"])(n),"online",0),Object(L["a"])(Object(E["a"])(n),"input_comment",""),Object(L["a"])(Object(E["a"])(n),"chatroom_ws",void 0),Object(L["a"])(Object(E["a"])(n),"is_readyForChat",!1),Object(L["a"])(Object(E["a"])(n),"commentList",[]),n}return Object(y["a"])(t,e),Object(I["a"])(t,[{key:"mounted",value:function(){this.getPlayInfo(),this.connectChatRoom()}},{key:"beforeDestroy",value:function(){void 0!==this.chatroom_ws&&null!==this.chatroom_ws&&(console.log("关闭ws"),this.chatroom_ws.close())}},{key:"getPlayInfo",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$gConst.apiRoot+"index/roominfo",null!=localStorage.getItem("token")){e.next=7;break}return e.next=4,Object(N["a"])(t,{uid:this.$route.params.uid});case 4:n=e.sent,e.next=16;break;case 7:if(""!=this.password){e.next=13;break}return e.next=10,Object(N["b"])(t,{uid:this.$route.params.uid,token:localStorage.getItem("token")||""});case 10:n=e.sent,e.next=16;break;case 13:return e.next=15,Object(N["b"])(t,{uid:this.$route.params.uid,token:localStorage.getItem("token")||"",password:this.password});case 15:n=e.sent;case 16:return e.next=18,n.json();case 18:if(a=e.sent,16!=a["error"]){e.next=22;break}return this.require_password=!0,e.abrupt("return");case 22:if(17!=a["error"]){e.next=25;break}return this.$gConst.globalbus.$emit("send-info","tips.wrongPassword"),e.abrupt("return");case 25:if(0==a["error"]){e.next=29;break}return this.$gConst.globalbus.$emit("send-info",a["info"]),this.$router.push("/list"),e.abrupt("return");case 29:this.roomname=a.roomname,this.uname=a.uname,this.description=a.description,this.is_loading=!1,this.require_password=!1,1==a.streaming&&(this.is_streaming=!0,this.streaming_uri=a.streaming_uri);case 35:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"connectChatRoom",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.$gConst.wsHost,this.chatroom_ws=new WebSocket(t),this.chatroom_ws.addEventListener("open",function(){n.wsSend({token:localStorage.getItem("token")||"",roomid:n.$route.params.uid,cmd:1}),n.wsStartHeartbeat()}),this.chatroom_ws.addEventListener("message",function(e){var t=JSON.parse(e.data);switch(t.cmd){case 1:0==t.error&&(n.is_readyForChat=!0);break;case 2:n.online=t.online;break;case 3:n.commentList.splice(0,n.commentList.length-999),n.commentList.push(t.comment),n.$nextTick(function(){var e=document.getElementById("commentarea");e.scrollTop=e.scrollHeight+50});break;default:break}});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"wsStartHeartbeat",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===this.chatroom_ws||null===this.chatroom_ws||1!=this.chatroom_ws.readyState){e.next=6;break}return this.wsSend({cmd:2}),e.next=4,he(3e4);case 4:e.next=0;break;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"wsSend",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!==this.chatroom_ws&&null!==this.chatroom_ws&&1==this.chatroom_ws.readyState?this.chatroom_ws.send(JSON.stringify(t)):console.log("ws 连接已关闭或未成功建立");case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendComment",value:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:""!==this.input_comment&&(this.wsSend({cmd:3,comment:{content:this.input_comment}}),this.input_comment="");case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(m["default"]),ce=le))||ce),Se=$e,Re=Se,Pe=(n("9e10"),Object(C["a"])(Re,fe,be,!1,null,"6d6ac660",null)),Ie=Pe.exports;m["default"].use(d["a"]);t["a"]=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:$},{path:"/list",name:"list",component:K},{path:"/login",name:"login",component:W},{path:"/reg",name:"reg",component:ee},{path:"/user",name:"user",component:ve},{path:"/live/:uid",name:"live",component:Ie}]})},"485f":function(e,t,n){},5571:function(e,t,n){"use strict";var a=n("adca"),s=n.n(a);s.a},"56d7":function(e,t,n){"use strict";n.r(t),function(e){n("cadf"),n("551c"),n("f751"),n("097d");var t=n("2b0e"),a=n("a925"),s=n("41cb"),r=n("3dfd"),o=n("296e"),i=n("2f6e"),c=n("1157"),l=n.n(c),u=(n("1b58"),n("898e"));e.jQuery=e.$=l.a,t["default"].config.productionTip=!1,t["default"].use(a["a"]),t["default"].use(u["a"]);var p={"en-US":o["a"],"zh-CN":i["a"]},m=new a["a"]({locale:"zh-CN",messages:p});new t["default"]({router:s["a"],i18n:m,render:function(e){return e(r["a"])}}).$mount("#app")}.call(this,n("c8ba"))},"5c0b":function(e,t,n){"use strict";var a=n("5e27"),s=n.n(a);s.a},"5e27":function(e,t,n){},"5f8f":function(e,t,n){"use strict";var a=n("b5fd"),s=n.n(a);s.a},"645a":function(e,t,n){"use strict";var a=n("7c0e"),s=n.n(a);s.a},"7c0e":function(e,t,n){},"898e":function(e,t,n){"use strict";var a=n("d225"),s=n("b0b4"),r=n("2b0e"),o=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,[{key:"install",value:function(e){e.prototype.$gConst={apiRoot:"https://api.minyami.net/apiv2/",wsHost:"wss://api.minyami.net",globalbus:new r["default"]}}}]),e}();t["a"]=new o},"93af":function(e,t,n){},"9e10":function(e,t,n){"use strict";var a=n("d26a"),s=n.n(a);s.a},"9e3c":function(e,t,n){"use strict";var a=n("93af"),s=n.n(a);s.a},adca:function(e,t,n){},b338:function(e,t,n){"use strict";var a=n("485f"),s=n.n(a);s.a},b5fd:function(e,t,n){},c29f:function(e,t,n){},cdd8:function(e,t,n){"use strict";var a=n("e2ea"),s=n.n(a);s.a},d26a:function(e,t,n){},e2ea:function(e,t,n){},eb86:function(e,t,n){"use strict";var a=n("c29f"),s=n.n(a);s.a}});
//# sourceMappingURL=app.fa23d663.js.map