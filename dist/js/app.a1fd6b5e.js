(function(e){function t(t){for(var n,r,i=t[0],c=t[1],l=t[2],p=0,m=[];p<i.length;p++)r=i[p],s[r]&&m.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},s={app:0},o=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0365":function(e,t,a){},"04a5":function(e,t,a){"use strict";var n=a("0365"),s=a.n(n);s.a},"05e0":function(e,t,a){},"07f9":function(e,t,a){"use strict";function n(e,t){var a=JSON.stringify(t);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:a})}a.d(t,"a",function(){return n})},"296e":function(e,t,a){"use strict";a("cadf"),a("551c"),a("097d");var n={promotion:{home:"<h1>Share your キラキラドキドキ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h1><h1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with the world.</h1>"},info:{soralive:"SoraLive",home:"Home Page",allLive:"All Streaming",broadcasting:"Live broadcast",live:"Live",language:"Language",joinnow:"Join Now",reg:"Sign Up",login:"Sign In",email:"E-mail",password:"Password",uname:"Username",repass:"Repeat password",roomname:"Room Name",null:"Meow~",info:"Notice",success:"Succeed",userCenter:"User Center",myLiveRoom:"My Live Room",logout:"Sign Out",unknownError:"Unknown Error",basicInfo:"Basic Infomation",loading:"Loading...",databaseError:"Database Error",liveroomInfo:"Live room infomation",status:"Current status",close:"close",open:"open",description:"Introduction",updateRN:"Modify the room name and introduction",streamParam:"broadcast parameters",streamServer:"Stream Server",streamKey:"Stream Key",resetStreamKey:"Reset stream key",imcomming:"I'm Comming!"},tips:{repassDifferent:"The duplicate password is different.",registerSuccess:"Registration is successful, please wait for the administrator to review before opening the room. After the audit is passed, the administrator will manually send a notification email to your mailbox. Please pay attention to the mail from @minyami.net.",usernameNotEmpty:"Username can not be empty.",passwordNotEmpty:"Password can not be empty.",emailNotEmpty:"E-mail can not be empty.",roomnameNotEmpty:"Room name can not be empty.",usernameUsed:"The username is already in use by another user.",emailUsed:"The E-mail address has been used by other users.",tokenNotEmpty:"Token parameter is required",invalidToken:"Token is invalid",passNotMatched:"Username and password do not match",loginencryptfailed:"Encryption failed during login",alreadyLogin:"You are already logged in",unloginSucceed:"Successful logout",loginSucceed:"Successful login",needApprove:"<p>Your account is currently not approved.</p><p>You can browse the content of this site without restriction, but you can't push stream to this site.</p><p>To open a live room and push stream, please wait for the administrator to review it.</p>",updateRnSucceed:"The name and description of the room were successfully modified.",clickButtonBelowToResetStreamKey:"Click the button below to reset the stream key",resetStreamKeyTips1:"When the live video does not correspond to the stream, or the live program delays for a long time, you can try to reset the stream code to avoid the cache problem.",resetStreamKeyTips2:"Streaming on a public machine or other security reasons can also invalidate previous stream settings by resetting the stream key.",homeDescription:"SoraLive is a streaming service website. You can stream and live via OBS using standard RTMP.",setStatusNotEmpty:"The set room properties cannot be empty.",setStatusError:"The set room property is invalid.",liveRoomEmpty:"No one is sharing their own キラキラドキドキ",uidInvalid:"The requested room number is invalid.",userInvalid:"The requested user does not exist or does not open the live room."},action:{toggleNavbar:"Toggle navigation bar",close:"close",copy:"copy"},lang:{"zh-CN":"Chinese (Simplified)","en-US":"English"}};t["a"]=n},"2f6e":function(e,t,a){"use strict";a("cadf"),a("551c"),a("097d");var n={promotion:{home:"<h1>与全世界分享你的&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h1><h1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;キラキラドキドキ</h1>"},info:{soralive:"SoraLive",home:"首页",allLive:"所有直播",broadcasting:"正在直播",live:"直播",language:"语言",joinnow:"立即加入",reg:"注册",login:"登录",email:"E-mail",password:"密码",uname:"用户名",repass:"重复密码",roomname:"房间名",null:"喵~",info:"信息提示",success:"成功",userCenter:"用户中心",myLiveRoom:"我的直播间",logout:"注销",unknownError:"未知错误",basicInfo:"基本信息",loading:"正在加载...",databaseError:"数据库错误",liveroomInfo:"直播间信息",status:"当前状态",close:"关闭",open:"打开",description:"简介",updateRN:"修改房间名及简介",streamParam:"直播参数",streamServer:"直播地址",streamKey:"串流码",resetStreamKey:"重置串流码",imcomming:"我来！"},tips:{repassDifferent:"两次密码不一致。",registerSuccess:"注册成功，请等待管理员审核后才可开设房间，审核通过后会由管理员手工向你邮箱发送通知邮件。请留意来自@minyami.net的邮件。",usernameNotEmpty:"用户名不能为空。",passwordNotEmpty:"密码不能为空。",emailNotEmpty:"邮箱不能为空。",roomnameNotEmpty:"房间名不能为空",usernameUsed:"用户名已被其他用户使用。",emailUsed:"邮箱已被其他用户使用。",tokenNotEmpty:"Token是必须参数",invalidToken:"Token无效",passNotMatched:"用户名和密码不匹配",loginencryptfailed:"在登录过程中加密失败",alreadyLogin:"您已经是登录状态",unloginSucceed:"成功注销",loginSucceed:"成功登录",needApprove:"<p>您的账号目前是未通过审核状态。</p><p>您可以不受限制的浏览本站内容，但是你不能向本站推流。</p><p>要开设直播间并推流，请等待管理员审核后进行。</p>",updateRnSucceed:"房间名及简介修改成功",clickButtonBelowToResetStreamKey:"点击下面按钮重置串流码",resetStreamKeyTips1:"当直播视频与串流不对应，或直播节目播放过去很久内容的时候可以尝试重置串流码来避免缓存问题。",resetStreamKeyTips2:"在公共机器上串流或其他安全性原因也可通过重置串流码使之前的串流设置失效。",homeDescription:"SoraLive是一个串流服务网站。你可以使用标准的RTMP通过OBS进行串流与直播。",setStatusNotEmpty:"设置的房间属性不能为空。",setStatusError:"设置的房间属性无效。",liveRoomEmpty:"没有人正在分享自己的キラキラドキドキ",uidInvalid:"请求的房间号无效。",userInvalid:"请求的用户不存在或未开通直播间。"},action:{toggleNavbar:"切换导航栏",close:"关闭",copy:"复制"},lang:{"zh-CN":"简体中文","en-US":"英语"}};t["a"]=n},"3dfd":function(e,t,a){"use strict";var n,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Modal"),a("nav",{staticClass:"navbar navbar-inverse navbar-fixed-top"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"navbar-header"},[a("button",{staticClass:"navbar-toggle collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#bs-navbar-collapse","aria-expanded":"false"}},[a("span",{staticClass:"sr-only"},[e._v(e._s(e.$t("action.toggleNavbar")))]),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"})]),a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[e._v(e._s(e.$t("info.soralive")))])],1),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"bs-navbar-collapse"}},[a("ul",{staticClass:"nav navbar-nav"},[a("li",[a("router-link",{attrs:{to:"/"}},[e._v(e._s(e.$t("info.home")))])],1),a("li",[a("router-link",{attrs:{to:"/list"}},[e._v(e._s(e.$t("info.allLive")))])],1)]),a("ul",{staticClass:"nav navbar-nav navbar-right"},[a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"javascript:;","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"}},[e._v(e._s(e.$t("lang."+e.currentLang))+" "),a("span",{staticClass:"caret"})]),a("ul",{staticClass:"dropdown-menu"},[a("li",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.chlang("zh-CN")}}},[e._v(e._s(e.$t("lang.zh-CN")))])]),a("li",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.chlang("en-US")}}},[e._v(e._s(e.$t("lang.en-US")))])])])]),e.isLogin?[a("li",[a("router-link",{attrs:{to:"/reg"}},[e._v(e._s(e.$t("info.reg")))])],1),a("li",[a("router-link",{attrs:{to:"/login"}},[e._v(e._s(e.$t("info.login")))])],1)]:[a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"javascript:;","data-toggle":"dropdown",role:"button","aira-haspopup":"true","aria-expanded":"false"}},[e._v(e._s(e.uname)+" "),a("span",{staticClass:"caret"})]),a("ul",{staticClass:"dropdown-menu"},[a("li",[a("router-link",{attrs:{to:"/user"}},[e._v(e._s(e.$t("info.userCenter")))])],1),a("li",[a("a",{attrs:{href:"javascript:;"}},[e._v(e._s(e.$t("info.myLiveRoom")))])]),a("li",{staticClass:"divider",attrs:{role:"separator"}}),a("li",[a("a",{attrs:{href:"javascript:;"},on:{click:e.logout}},[e._v(e._s(e.$t("info.logout")))])])])])]],2)])])]),a("div",{staticClass:"container-fluid main-content"},[a("router-view")],1),e._m(0)],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"container-fluid footer-content"},[a("div",[e._v("©SoraLive 2018.")]),a("div",[e._v("Special Thanks to MeowSound Idols and other supporters.")])])])}],r=(a("96cf"),a("1da1")),i=a("d4ec"),c=a("bee2"),l=a("99de"),u=a("7e84"),p=a("262e"),m=a("2b0e"),d=a("65d9"),f=a.n(d),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal fade",attrs:{id:"myModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._m(0),a("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t(e.title)))])]),a("div",{staticClass:"modal-body"},[e._v("\n                "+e._s(e.$t(e.msg))+"\n            ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[e._v(e._s(e.$t("action.close")))])])])])])},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],g=a("257e"),h=a("ade3"),y=a("1157"),j=a.n(y),_=f()(n=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=Object(l["a"])(this,(e=Object(u["a"])(t)).call.apply(e,[this].concat(s))),Object(h["a"])(Object(g["a"])(Object(g["a"])(a)),"title","info.info"),Object(h["a"])(Object(g["a"])(Object(g["a"])(a)),"msg","info.null"),a}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"created",value:function(){var e=this;this.$gConst.globalbus.$on("send-info",function(t){e.msg=t,e.showModal()})}},{key:"showModal",value:function(){j()("#myModal").modal()}}]),t}(m["default"]))||n,O=_,C=O,w=(a("b338"),a("2877")),k=Object(w["a"])(C,b,v,!1,null,null,null);k.options.__file="modal.vue";var $,S,x=k.exports,R=a("07f9"),I=($=f()({components:{Modal:x}}),$(S=function(e){function t(){return Object(i["a"])(this,t),Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"created",value:function(){console.log("SoraLive 0.1.0 created by MoewSound Idols."),this.$i18n.locale=localStorage.getItem("lang")||"zh-CN"}},{key:"chlang",value:function(e){this.$i18n.locale=e,localStorage.setItem("lang",e)}},{key:"logout",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"user-logout",e.next=3,Object(R["a"])(t,{token:localStorage.getItem("token")||""});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,0!=n["error"]?this.$gConst.globalbus.$emit("send-info",n["info"]):this.$gConst.globalbus.$emit("send-info","tips.unloginSucceed"),this.$router.push("/login"),localStorage.removeItem("token"),localStorage.removeItem("uname"),localStorage.removeItem("sk"),localStorage.removeItem("uid"),localStorage.removeItem("user-type"),location.reload();case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"currentLang",get:function(){return this.$i18n.locale}},{key:"isLogin",get:function(){return null==localStorage.getItem("token")}},{key:"uname",get:function(){return localStorage.getItem("uname")||"[][NULL]"}}]),t}(m["default"]))||S),E=I,N=E,P=(a("5c0b"),Object(w["a"])(N,s,o,!1,null,null,null));P.options.__file="App.vue";t["a"]=P.exports},"41cb":function(e,t,a){"use strict";var n,s=a("2b0e"),o=a("8c4f"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jumbotron"},[a("div",{staticClass:"jumbotron-centerhead",domProps:{innerHTML:e._s(e.$t("promotion.home"))}}),a("p",[e._v(" ")]),a("p",[e._v(e._s(e.$t("tips.homeDescription")))]),a("p",[a("router-link",{staticClass:"btn btn-primary btn-lg",attrs:{to:"/reg",role:"button"}},[e._v(e._s(e.$t("info.joinnow")))])],1)])},i=[],c=a("d4ec"),l=a("99de"),u=a("7e84"),p=a("262e"),m=a("65d9"),d=a.n(m),f=d()(n=function(e){function t(){return Object(c["a"])(this,t),Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),t}(s["default"]))||n,b=f,v=b,g=(a("04a5"),a("2877")),h=Object(g["a"])(v,r,i,!1,null,"0081e001",null);h.options.__file="home.vue";var y,j=h.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("h1",[e._v(e._s(e.$t("info.broadcasting")))]),0!=e.roomlist.length?a("div",{staticClass:"room-list"},e._l(e.roomlist,function(t){return a("div",{key:t.uid,staticClass:"room-item",on:{click:function(a){e.openRoom(t.uid)}}},[a("div",{staticClass:"room-name"},[e._v(e._s(t.roomname))]),a("div",{staticClass:"room-user"},[e._v("@"+e._s(t.uname))])])})):a("div",{staticClass:"room-empty"},[a("p",[e._v(e._s(e.$t("tips.liveRoomEmpty")))]),a("p",[a("router-link",{staticClass:"btn btn-primary btn-lg",attrs:{to:"/user",role:"button"}},[e._v(e._s(e.$t("info.imcomming")))])],1)])])},O=[],C=(a("96cf"),a("1da1")),w=a("bee2"),k=a("257e"),$=a("ade3"),S=d()(y=function(e){function t(){var e,a;Object(c["a"])(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=Object(l["a"])(this,(e=Object(u["a"])(t)).call.apply(e,[this].concat(s))),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"roomlist",[]),a}return Object(p["a"])(t,e),Object(w["a"])(t,[{key:"mounted",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"list-streaming",e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,this.roomlist=n;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"openRoom",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/live/"+t);case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(s["default"]))||y,x=S,R=x,I=(a("d723"),Object(g["a"])(R,_,O,!1,null,"4251b160",null));I.options.__file="list.vue";var E,N=I.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-area"},[e.isAlert?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("span",[e._v(e._s(e.$t(e.alertInfo)))])]):e._e(),a("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.dologin(t)}}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputUname"}},[e._v(e._s(e.$t("info.uname")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.uname,expression:"uname"}],staticClass:"form-control",attrs:{type:"text",id:"inputUname",placeholder:e.$t("info.uname")},domProps:{value:e.uname},on:{input:function(t){t.target.composing||(e.uname=t.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputPassword"}},[e._v(e._s(e.$t("info.password")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:e.$t("info.password")},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-sm-offset-2 col-sm-10"},[a("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[e._v(e._s(e.$t("info.login")))])])])])])},T=[],L=a("07f9"),A=a("720d"),M=d()(E=function(e){function t(){var e,a;Object(c["a"])(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=Object(l["a"])(this,(e=Object(u["a"])(t)).call.apply(e,[this].concat(s))),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"isAlert",!1),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"alertInfo","info.null"),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"uname",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"password",""),a}return Object(p["a"])(t,e),Object(w["a"])(t,[{key:"created",value:function(){null!=localStorage.getItem("token")&&(this.$gConst.globalbus.$emit("send-info","tips.alreadyLogin"),this.$router.push("/"))}},{key:"dologin",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s,o,r,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.$gConst.apiRoot+"pre-login");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,n=a["key"],s=a["token"],o=new A["JSEncrypt"],o.setPublicKey(n),r=o.encrypt(this.password),r){e.next=15;break}return this.isAlert=!0,this.alertInfo="tips.loginencryptfailed",e.abrupt("return");case 15:return e.next=17,Object(L["a"])(this.$gConst.apiRoot+"user-login",{token:s,uname:this.uname,pass:r});case 17:return i=e.sent,e.next=20,i.json();case 20:if(c=e.sent,0==c["error"]){e.next=25;break}return this.isAlert=!0,this.alertInfo=c["info"],e.abrupt("return");case 25:localStorage.setItem("token",c["token"]),localStorage.setItem("sk",c["user"]["sk"]),localStorage.setItem("uname",c["user"]["uname"]),localStorage.setItem("uid",c["user"]["uid"]),localStorage.setItem("user-type",c["user"]["type"]),this.$gConst.globalbus.$emit("send-info","tips.loginSucceed"),this.$router.push("/"),location.reload();case 33:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(s["default"]))||E,K=M,U=K,B=(a("5571"),Object(g["a"])(U,P,T,!1,null,null,null));B.options.__file="login.vue";var D,z=B.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-area"},[e.isAlert?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("span",[e._v(e._s(e.$t(e.alertInfo)))])]):e._e(),a("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.doreg(t)}}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputUname"}},[e._v(e._s(e.$t("info.uname")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.uname,expression:"uname"}],staticClass:"form-control",attrs:{type:"text",id:"inputUname",placeholder:e.$t("info.uname")},domProps:{value:e.uname},on:{input:function(t){t.target.composing||(e.uname=t.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputEmail"}},[e._v(e._s(e.$t("info.email")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:e.$t("info.email")},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputPassword"}},[e._v(e._s(e.$t("info.password")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:e.$t("info.password")},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputPassword2"}},[e._v(e._s(e.$t("info.repass")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.repass,expression:"repass"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword2",placeholder:e.$t("info.repass")},domProps:{value:e.repass},on:{input:function(t){t.target.composing||(e.repass=t.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputRoomname"}},[e._v(e._s(e.$t("info.roomname")))]),a("div",{staticClass:"col-sm-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.roomname,expression:"roomname"}],staticClass:"form-control",attrs:{type:"text",id:"inputRoomname",placeholder:e.$t("info.roomname")},domProps:{value:e.roomname},on:{input:function(t){t.target.composing||(e.roomname=t.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-sm-offset-2 col-sm-10"},[a("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[e._v(e._s(e.$t("info.reg")))])])])])])},H=[],Y=d()(D=function(e){function t(){var e,a;Object(c["a"])(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=Object(l["a"])(this,(e=Object(u["a"])(t)).call.apply(e,[this].concat(s))),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"uname",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"email",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"password",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"repass",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"roomname",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"isAlert",!1),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"alertInfo","info.null"),a}return Object(p["a"])(t,e),Object(w["a"])(t,[{key:"created",value:function(){null!=localStorage.getItem("token")&&(this.$gConst.globalbus.$emit("send-info","tips.alreadyLogin"),this.$router.push("/"))}},{key:"doreg",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.password==this.repass){e.next=5;break}this.alertInfo="tips.repassDifferent",this.isAlert=!0,e.next=13;break;case 5:return t=this.$gConst.apiRoot+"user-reg",e.next=8,Object(L["a"])(t,{uname:this.uname,email:this.email,pass:this.password,roomname:this.roomname});case 8:return a=e.sent,e.next=11,a.json();case 11:n=e.sent,1==n["error"]?(this.isAlert=!0,this.alertInfo=n["info"]):(this.$gConst.globalbus.$emit("send-info","tips.registerSuccess"),this.$router.push("/login"));case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(s["default"]))||D,q=Y,F=q,Q=(a("645a"),Object(g["a"])(F,J,H,!1,null,null,null));Q.options.__file="reg.vue";var W,G=Q.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"col-sm-8"},[e.isOpen?a("section",[a("div",[a("h3",[e._v(e._s(e.$t("info.liveroomInfo")))]),a("p",[e._v("\n                    "+e._s(e.$t("info.status"))+":\n                    "),a("button",{staticClass:"btn",class:{"btn-default":e.streaming,"btn-success":!e.streaming},on:{click:e.setStreamClose}},[e._v(e._s(e.$t("info.close")))]),a("button",{staticClass:"btn",class:{"btn-default":!e.streaming,"btn-success":e.streaming},on:{click:e.setStreamOpen}},[e._v(e._s(e.$t("info.open")))])]),a("p",[e._v("\n                    "+e._s(e.$t("info.roomname"))+":\n                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.roomname,expression:"roomname"}],staticClass:"textbox",attrs:{type:"text",size:"70"},domProps:{value:e.roomname},on:{input:function(t){t.target.composing||(e.roomname=t.target.value)}}})]),a("p",[e._v("\n                    "+e._s(e.$t("info.description"))+":\n                    "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"textarea",attrs:{cols:"70",rows:"6"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),a("p",[a("button",{staticClass:"btn btn-primary",on:{click:e.updateRN}},[e._v(e._s(e.$t("info.updateRN")))])])]),a("div",[a("h3",[e._v(e._s(e.$t("info.streamParam")))]),a("p",[e._v(e._s(e.$t("info.streamServer"))+": "+e._s(e.streaming_address)+" "),a("button",{staticClass:"btn btn-info btn-sm",on:{click:e.copyStreamingURL}},[e._v(e._s(e.$t("action.copy")))])]),a("p",[e._v(e._s(e.$t("info.streamKey"))+": "+e._s(e.streamkey||e.$t("tips.clickButtonBelowToResetStreamKey"))+" "),a("button",{staticClass:"btn btn-info btn-sm",on:{click:e.copyStreamKey}},[e._v(e._s(e.$t("action.copy")))])]),a("p",[a("button",{staticClass:"btn btn-info",on:{click:e.resetSK}},[e._v(e._s(e.$t("info.resetStreamKey")))]),a("br"),a("span",{staticStyle:{color:"#666"}},[e._v(e._s(e.$t("tips.resetStreamKeyTips1")))]),a("br"),a("span",{staticStyle:{color:"#666"}},[e._v(e._s(e.$t("tips.resetStreamKeyTips2")))])])])]):a("section",[a("div",{domProps:{innerHTML:e._s(e.$t(e.loadingInfo))}})])]),a("div",{staticClass:"col-sm-4"},[a("h3",[e._v(e._s(e.$t("info.basicInfo")))]),a("p",[e._v("UID: "+e._s(e.uid))]),a("p",[e._v(e._s(e.$t("info.email"))+": "+e._s(e.email))]),a("p",[e._v(e._s(e.$t("info.uname"))+": "+e._s(e.uname))])])])},X=[];function Z(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();var a=!1;try{a=document.execCommand("copy");var n=a?"successful":"unsuccessful";console.log("Copying text command was "+n)}catch(s){console.log("Oops, unable to copy"),a=!1}return document.body.removeChild(t),a}var ee=d()(W=function(e){function t(){var e,a;Object(c["a"])(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=Object(l["a"])(this,(e=Object(u["a"])(t)).call.apply(e,[this].concat(s))),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"cover",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"description",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"email",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"roomname",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"streaming",!1),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"streamkey",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"type",0),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"uid",0),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"uname",""),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"loadingInfo","info.loading"),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"streaming_address",""),a}return Object(p["a"])(t,e),Object(w["a"])(t,[{key:"created",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"user-detail",e.next=3,Object(L["a"])(t,{token:localStorage.getItem("token")||""});case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,0==n["error"]){e.next=12;break}return this.$gConst.globalbus.$emit("send-info",n["info"]),e.abrupt("return");case 12:localStorage.setItem("user-type",n["user"]["type"]),localStorage.setItem("uid",n["user"]["uid"]),localStorage.setItem("uname",n["user"]["uname"]),this.uid=n["user"]["uid"],this.uname=n["user"]["uname"],this.type=n["user"]["type"],this.streamkey=n["user"]["streamkey"],this.roomname=n["user"]["roomname"],this.email=n["user"]["email"],this.description=n["user"]["description"],this.cover=n["user"]["cover"],this.streaming="1"==n["user"]["streaming"],this.streaming_address=n["streaming_address"],this.loadingInfo="tips.needApprove";case 26:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setStreamOpen",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.streaming){e.next=11;break}return t=this.$gConst.apiRoot+"set-roomstatus",e.next=4,Object(L["a"])(t,{token:localStorage.getItem("token")||"",status:1});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,0==n["error"]?this.streaming=!0:this.$gConst.globalbus.$emit("send-info",n["info"]),e.next=12;break;case 11:console.log("[BAKA INFO] Streaming is already OPEN.");case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setStreamClose",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.streaming){e.next=11;break}return t=this.$gConst.apiRoot+"set-roomstatus",e.next=4,Object(L["a"])(t,{token:localStorage.getItem("token")||"",status:0});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,0==n["error"]?this.streaming=!1:this.$gConst.globalbus.$emit("send-info",n["info"]),e.next=12;break;case 11:console.log("[BAKA INFO] Streaming is already CLOSE.");case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updateRN",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.roomname||"",a=this.description||"",n=this.$gConst.apiRoot+"update-rn",e.next=5,Object(L["a"])(n,{token:localStorage.getItem("token")||"",roomname:t,description:a});case 5:return s=e.sent,e.next=8,s.json();case 8:o=e.sent,0==o["error"]?this.$gConst.globalbus.$emit("send-info","tips.updateRnSucceed"):this.$gConst.globalbus.$emit("send-info",o["info"]);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"resetSK",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"reset-streamkey",e.next=3,Object(L["a"])(t,{token:localStorage.getItem("token")||""});case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,0==n["error"]){e.next=12;break}return this.$gConst.globalbus.$emit("send-info",n["info"]),e.abrupt("return");case 12:location.reload();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"copyStreamingURL",value:function(){Z(this.streaming_address)}},{key:"copyStreamKey",value:function(){Z(this.streamkey)}},{key:"isOpen",get:function(){return 1==(1&this.type)}},{key:"isAdmin",get:function(){return 1==(this.type>>4&1)}}]),t}(s["default"]))||W,te=ee,ae=te,ne=(a("9e3c"),Object(g["a"])(ae,V,X,!1,null,null,null));ne.options.__file="user.vue";var se,oe=ne.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v(e._s(e.roomname))]),a("p",[e._v("@"+e._s(e.uname))]),a("div",{attrs:{id:"playerSlot"}},[e.is_loading?a("div",[e._v(e._s(e.$t("info.loading")))]):a("div",{staticClass:"player-area"},[e._v("未开播")])]),a("div",[a("h3",[e._v(e._s(e.$t("info.description")))]),a("div",[e._v(e._s(e.description))])])])},ie=[],ce=a("ba56"),le=a.n(ce),ue=d()(se=function(e){function t(){var e,a;Object(c["a"])(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=Object(l["a"])(this,(e=Object(u["a"])(t)).call.apply(e,[this].concat(s))),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"roomname","Room Title"),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"uname","username"),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"description","Description"),Object($["a"])(Object(k["a"])(Object(k["a"])(a)),"is_loading",!0),a}return Object(p["a"])(t,e),Object(w["a"])(t,[{key:"mounted",value:function(){console.log(this.$route.params.uid),this.getPlayInfo()}},{key:"getPlayInfo",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$gConst.apiRoot+"get-roominfo",e.next=3,Object(L["a"])(t,{uid:this.$route.params.uid});case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,0==n["error"]){e.next=11;break}return this.$gConst.globalbus.$emit("send-info",n["info"]),this.$router.push("/list"),e.abrupt("return");case 11:if(this.roomname=n.roomname,this.uname=n.uname,this.description=n.description,this.is_loading=!1,1!=n.streaming){e.next=18;break}return e.next=18,this.readyPlayer(n.streaming_uri);case 18:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"readyPlayer",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(t){var a,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=document.getElementById("playerSlot"),a.innerHTML="",n=document.createElement("video"),a.appendChild(n),s=new le.a,s.loadSource(t),s.attachMedia(n),s.on(le.a.Events.MANIFEST_PARSED,function(){n.play()});case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(s["default"]))||se,pe=ue,me=pe,de=(a("d0a4"),Object(g["a"])(me,re,ie,!1,null,null,null));de.options.__file="live.vue";var fe=de.exports;s["default"].use(o["a"]);t["a"]=new o["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:j},{path:"/list",name:"list",component:N},{path:"/login",name:"login",component:z},{path:"/reg",name:"reg",component:G},{path:"/user",name:"user",component:oe},{path:"/live/:uid",name:"live",component:fe}]})},"485f":function(e,t,a){},5571:function(e,t,a){"use strict";var n=a("adca"),s=a.n(n);s.a},"56d7":function(e,t,a){"use strict";a.r(t),function(e){a("cadf"),a("551c"),a("097d");var t=a("2b0e"),n=a("a925"),s=a("41cb"),o=a("3dfd"),r=a("296e"),i=a("2f6e"),c=a("1157"),l=a.n(c),u=(a("1b58"),a("898e"));e.jQuery=e.$=l.a,t["default"].config.productionTip=!1,t["default"].use(n["a"]),t["default"].use(u["a"]);var p={"en-US":r["a"],"zh-CN":i["a"]},m=new n["a"]({locale:"zh-CN",messages:p});new t["default"]({router:s["a"],i18n:m,render:function(e){return e(o["a"])}}).$mount("#app")}.call(this,a("c8ba"))},"5bc1":function(e,t,a){},"5c0b":function(e,t,a){"use strict";var n=a("5e27"),s=a.n(n);s.a},"5e27":function(e,t,a){},"645a":function(e,t,a){"use strict";var n=a("7c0e"),s=a.n(n);s.a},"7c0e":function(e,t,a){},"898e":function(e,t,a){"use strict";var n=a("d4ec"),s=a("bee2"),o=(a("cadf"),a("551c"),a("097d"),a("2b0e")),r=function(){function e(){Object(n["a"])(this,e)}return Object(s["a"])(e,[{key:"install",value:function(e){e.prototype.$gConst={apiRoot:"https://api.minyami.net/live/api/",globalbus:new o["default"]}}}]),e}();t["a"]=new r},"93af":function(e,t,a){},"9e3c":function(e,t,a){"use strict";var n=a("93af"),s=a.n(n);s.a},adca:function(e,t,a){},b338:function(e,t,a){"use strict";var n=a("485f"),s=a.n(n);s.a},d0a4:function(e,t,a){"use strict";var n=a("05e0"),s=a.n(n);s.a},d723:function(e,t,a){"use strict";var n=a("5bc1"),s=a.n(n);s.a}});
//# sourceMappingURL=app.a1fd6b5e.js.map